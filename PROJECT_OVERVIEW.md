# é¡¹ç›®å®ç°æ¦‚è§ˆ

## ğŸ‰ é¡¹ç›®å®Œæˆæƒ…å†µ

AI HTML Generator é¡¹ç›®å·²å®Œæ•´å®ç°ï¼Œæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å‡å·²å¼€å‘å®Œæˆå¹¶å¯æ­£å¸¸è¿è¡Œã€‚

## âœ… å·²å®ç°åŠŸèƒ½

### 1. æ ¸å¿ƒåŠŸèƒ½
- âœ… **AI å¯¹è¯ç”Ÿæˆ**ï¼šé›†æˆ OpenAI æ ‡å‡† APIï¼Œæ”¯æŒæµå¼å¯¹è¯ç”Ÿæˆ HTML
- âœ… **å®æ—¶é¢„è§ˆ**ï¼šiframe æ²™ç®±æ¨¡å¼ï¼Œå®æ—¶æ¸²æŸ“ HTML é¢„è§ˆ
- âœ… **è¾¹ç¼˜å‘å¸ƒ**ï¼šé›†æˆé˜¿é‡Œäº‘ ESA EdgeKV å­˜å‚¨ï¼Œä¸€é”®å‘å¸ƒ
- âœ… **å†å²è®°å½•**ï¼šæœ¬åœ°å­˜å‚¨å†å²ç”Ÿæˆè®°å½•ï¼Œæ”¯æŒæŸ¥çœ‹å’Œç®¡ç†
- âœ… **å¤§å°æ£€æµ‹**ï¼šè‡ªåŠ¨æ£€æµ‹ HTML å¤§å°ï¼Œè¶…è¿‡ 1.8MB é™åˆ¶æ—¶è­¦å‘Š

### 2. UI/UX è®¾è®¡
- âœ… **æç®€ç¾å­¦**ï¼šæŸ”å’Œæ¸å˜èƒŒæ™¯ï¼Œæ¸…æ–°é…è‰²æ–¹æ¡ˆ
- âœ… **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨ç«¯
- âœ… **å¾®äº¤äº’åŠ¨ç”»**ï¼šæŒ‰é’® hoverã€å¡ç‰‡é˜´å½±ã€loading çŠ¶æ€
- âœ… **å›¾æ ‡é›†æˆ**ï¼šä½¿ç”¨ Heroicons çŸ¢é‡å›¾æ ‡åº“
- âœ… **ä¼˜é›…ç•™ç™½**ï¼šæ°åˆ°å¥½å¤„çš„é—´è·å’Œåœ†è§’è®¾è®¡

### 3. é…ç½®ç®¡ç†
- âœ… **æ¨¡å‹é…ç½®**ï¼šæ”¯æŒ OpenAIã€Deepseek ç­‰å¤šç§é¢„è®¾
- âœ… **æµ‹è¯•è¿æ¥**ï¼šéªŒè¯ API é…ç½®æ˜¯å¦æ­£ç¡®
- âœ… **æœ¬åœ°æŒä¹…åŒ–**ï¼šé…ç½®å’Œå†å²è®°å½•ä¿å­˜åˆ° localStorage

### 4. é”™è¯¯å¤„ç†
- âœ… **ç½‘ç»œé”™è¯¯**ï¼šå‹å¥½çš„é”™è¯¯æç¤ºå’Œé‡è¯•æœºåˆ¶
- âœ… **å¤§å°é™åˆ¶**ï¼šæ£€æµ‹å¹¶è­¦å‘Šè¶…è¿‡é™åˆ¶çš„ HTML
- âœ… **é…ç½®æ£€æŸ¥**ï¼šæœªé…ç½®æ¨¡å‹æ—¶å¼•å¯¼ç”¨æˆ·è®¾ç½®

## ğŸ“ é¡¹ç›®ç»“æ„

```
SimpleHtml/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ChatPanel.vue              # æµå¼å¯¹è¯é¢æ¿
â”‚   â”‚   â”œâ”€â”€ PreviewPanel.vue           # HTML å®æ—¶é¢„è§ˆ
â”‚   â”‚   â”œâ”€â”€ ModelSettingsModal.vue     # æ¨¡å‹é…ç½®å¼¹çª—
â”‚   â”‚   â”œâ”€â”€ HistoryPanel.vue           # å†å²è®°å½•ä¾§è¾¹æ 
â”‚   â”‚   â”œâ”€â”€ PublishSuccessModal.vue    # å‘å¸ƒæˆåŠŸæç¤º
â”‚   â”‚   â””â”€â”€ ToastNotification.vue      # é€šçŸ¥ç»„ä»¶
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ HomePage.vue               # é¦–é¡µï¼ˆè¾“å…¥æè¿°ï¼‰
â”‚   â”‚   â””â”€â”€ DesignPage.vue             # è®¾è®¡é¡µé¢ï¼ˆå¯¹è¯+é¢„è§ˆï¼‰
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ aiService.js               # OpenAI API é›†æˆ
â”‚   â”‚   â””â”€â”€ esaService.js              # é˜¿é‡Œäº‘ ESA API
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ prompts.js                 # AI æç¤ºè¯æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ htmlExtractor.js           # HTML æå–å·¥å…·
â”‚   â”‚   â””â”€â”€ storage.js                 # æœ¬åœ°å­˜å‚¨ç®¡ç†
â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â””â”€â”€ index.js                   # Vue Router é…ç½®
â”‚   â”œâ”€â”€ App.vue                        # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.js                        # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ style.css                      # Tailwind CSS é…ç½®
â”œâ”€â”€ edge-functions/
â”‚   â””â”€â”€ html-storage.js                # ESA è¾¹ç¼˜å‡½æ•°
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ DEPLOYMENT.md                  # éƒ¨ç½²æ–‡æ¡£
â”‚   â””â”€â”€ ESA_SETUP.md                   # ESA é…ç½®æŒ‡å—
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ deploy-edge-function.sh        # éƒ¨ç½²è¾…åŠ©è„šæœ¬
â”œâ”€â”€ .env.example                       # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .env                               # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ tailwind.config.js                 # Tailwind é…ç½®
â”œâ”€â”€ package.json                       # é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md                          # é¡¹ç›®è¯´æ˜
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç±»å‹ | æŠ€æœ¯ | ç”¨é€” |
|------|------|------|
| å‰ç«¯æ¡†æ¶ | Vue 3 + Vite | å¿«é€Ÿå“åº”å¼å¼€å‘ |
| æ ·å¼æ¡†æ¶ | Tailwind CSS | å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶ |
| è·¯ç”± | Vue Router | å•é¡µåº”ç”¨è·¯ç”±ç®¡ç† |
| AI é›†æˆ | OpenAI API | å¤§æ¨¡å‹å¯¹è¯ç”Ÿæˆ |
| æµå¼å¤„ç† | @microsoft/fetch-event-source | SSE æµå¼å“åº” |
| Markdown | Marked.js | Markdown æ¸²æŸ“ |
| å›¾æ ‡ | Heroicons | çŸ¢é‡å›¾æ ‡åº“ |
| å·¥å…·åº“ | UUID | å”¯ä¸€æ ‡è¯†ç”Ÿæˆ |
| è¾¹ç¼˜è®¡ç®— | é˜¿é‡Œäº‘ ESA | è¾¹ç¼˜å‡½æ•°å’Œå­˜å‚¨ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
VITE_ESA_DOMAIN=https://your-esa-domain.com
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—®: http://localhost:5173

### 4. é…ç½®å¤§æ¨¡å‹

1. ç‚¹å‡»å³ä¸Šè§’è®¾ç½®å›¾æ ‡
2. é€‰æ‹©é¢„è®¾æˆ–è‡ªå®šä¹‰é…ç½®
3. è¾“å…¥ API Key
4. æµ‹è¯•è¿æ¥

### 5. å¼€å§‹ä½¿ç”¨

1. åœ¨é¦–é¡µè¾“å…¥é¡µé¢æè¿°
2. ç‚¹å‡»ç”ŸæˆæŒ‰é’®
3. ä¸ AI å¯¹è¯ä¼˜åŒ–é¡µé¢
4. æ»¡æ„åç‚¹å‡»å‘å¸ƒ

## ğŸ“¦ éƒ¨ç½²æµç¨‹

### å‰ç«¯éƒ¨ç½²

1. **æ„å»ºç”Ÿäº§ç‰ˆæœ¬**
   ```bash
   npm run build
   ```

2. **éƒ¨ç½²åˆ°æœåŠ¡å™¨**
   - ä¸Šä¼  `dist/` ç›®å½•åˆ°æœåŠ¡å™¨
   - æˆ–ä½¿ç”¨ Vercelã€Netlify ç­‰å¹³å°

### è¾¹ç¼˜å‡½æ•°éƒ¨ç½²

1. **åˆ›å»º EdgeKV Namespace**
   - ç™»å½•é˜¿é‡Œäº‘ ESA æ§åˆ¶å°
   - åˆ›å»ºåä¸º `html_pages` çš„å­˜å‚¨ç©ºé—´

2. **éƒ¨ç½²è¾¹ç¼˜å‡½æ•°**
   - è¿è¡Œè¾…åŠ©è„šæœ¬ï¼š`./scripts/deploy-edge-function.sh`
   - å¤åˆ¶ä»£ç åˆ° ESA æ§åˆ¶å°
   - é…ç½®è·¯ç”±è§„åˆ™

3. **æ›´æ–°ç¯å¢ƒå˜é‡**
   - å°† ESA åŸŸåé…ç½®åˆ° `.env` æ–‡ä»¶
   - é‡æ–°æ„å»ºå‰ç«¯

è¯¦ç»†æ­¥éª¤è§ [docs/DEPLOYMENT.md](docs/DEPLOYMENT.md)

## ğŸ¯ æ ¸å¿ƒå·¥ä½œæµç¨‹

```
ç”¨æˆ·è¾“å…¥æè¿°
    â†“
é¦–é¡µ â†’ ç‚¹å‡»ç”Ÿæˆ
    â†“
è®¾è®¡é¡µé¢ï¼ˆå¯¹è¯+é¢„è§ˆï¼‰
    â†“
AI æµå¼ç”Ÿæˆ HTML
    â†“
å®æ—¶é¢„è§ˆï¼ˆiframe æ²™ç®±ï¼‰
    â†“
ç”¨æˆ·ç»§ç»­ä¼˜åŒ–ï¼ˆå¤šè½®å¯¹è¯ï¼‰
    â†“
ç‚¹å‡»å‘å¸ƒ
    â†“
è°ƒç”¨ ESA API å­˜å‚¨
    â†“
è¿”å›è®¿é—®é“¾æ¥
    â†“
ä¿å­˜åˆ°å†å²è®°å½•
```

## ğŸ”‘ å…³é”®å®ç°ç»†èŠ‚

### 1. AI æµå¼å¯¹è¯

ä½¿ç”¨ `@microsoft/fetch-event-source` å¤„ç† SSEï¼š

```javascript
await fetchEventSource(`${apiUrl}/chat/completions`, {
  method: 'POST',
  body: JSON.stringify({ messages, stream: true }),
  onmessage: (event) => {
    const content = JSON.parse(event.data).choices[0].delta.content;
    onMessage(content); // å®æ—¶æ˜¾ç¤º
  }
});
```

### 2. HTML æå–

æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… markdown ä»£ç å—ï¼š

```javascript
const codeBlockRegex = /```html\s*([\s\S]*?)```/i;
const html = text.match(codeBlockRegex)?.[1];
```

### 3. è¾¹ç¼˜å­˜å‚¨

EdgeKV API è°ƒç”¨ï¼š

```javascript
// å­˜å‚¨
const edgeKV = new EdgeKV({ namespace: 'html_pages' });
await edgeKV.put(uuid, htmlContent);

// è¯»å–
const html = await edgeKV.get(uuid, { type: 'text' });
```

### 4. å¤§å°æ£€æµ‹

```javascript
const size = new Blob([html]).size;
const isValid = size <= 1.8 * 1024 * 1024; // 1.8MB
```

### 5. iframe æ²™ç®±

```vue
<iframe
  :srcdoc="htmlContent"
  sandbox="allow-scripts allow-same-origin"
/>
```

## ğŸ“ ç¯å¢ƒå˜é‡

| å˜é‡ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `VITE_ESA_DOMAIN` | ESA è¾¹ç¼˜å‡½æ•°åŸŸå | `https://example.com` |

## ğŸ¨ UI è®¾è®¡ç‰¹ç‚¹

### é¢œè‰²æ–¹æ¡ˆ
- **ä¸»è‰²**ï¼šç´«è‰²åˆ°ç²‰è‰²æ¸å˜ (`from-purple-600 to-pink-600`)
- **èƒŒæ™¯**ï¼šè“ç´«ç²‰ä¸‰è‰²æ¸å˜ (`from-blue-50 via-purple-50 to-pink-50`)
- **ä¸­æ€§è‰²**ï¼šç°åº¦ç³»åˆ—

### è®¾è®¡å…ƒç´ 
- **åœ†è§’**ï¼š2rem (`rounded-3xl`)
- **é˜´å½±**ï¼šæŸ”å’Œé˜´å½± (`shadow-soft`, `shadow-2xl`)
- **é—´è·**ï¼š8 çš„å€æ•°ï¼ˆ`p-8`, `gap-6`ï¼‰
- **è¿‡æ¸¡**ï¼š200-300ms (`transition-all duration-200`)

## ğŸ”§ å¯æ‰©å±•åŠŸèƒ½

ä»¥ä¸‹åŠŸèƒ½å¯åœ¨æœªæ¥æ‰©å±•ï¼š

- [ ] å¤šè¯­è¨€æ”¯æŒï¼ˆi18nï¼‰
- [ ] ä¸»é¢˜åˆ‡æ¢ï¼ˆæš—è‰²æ¨¡å¼ï¼‰
- [ ] æ›´å¤š AI æ¨¡å‹æ”¯æŒ
- [ ] HTML æ¨¡æ¿åº“
- [ ] åä½œç¼–è¾‘
- [ ] ç‰ˆæœ¬ç®¡ç†
- [ ] å¯¼å‡ºä¸º ZIP
- [ ] è‡ªå®šä¹‰åŸŸåç»‘å®š

## â— æ³¨æ„äº‹é¡¹

1. **API Key å®‰å…¨**
   - API Key ä¿å­˜åœ¨ localStorageï¼Œä»…åœ¨æµè§ˆå™¨æœ¬åœ°
   - ä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨
   - å»ºè®®ä½¿ç”¨å—é™çš„ API Key

2. **EdgeKV é™åˆ¶**
   - å•ä¸ª value æœ€å¤§ 1.8MB
   - è¶…è¿‡é™åˆ¶æ— æ³•å‘å¸ƒ
   - å»ºè®®ä¼˜åŒ– HTML å¤§å°

3. **è·¨åŸŸé…ç½®**
   - è¾¹ç¼˜å‡½æ•°å·²é…ç½® CORS å¤´
   - æ”¯æŒè·¨åŸŸè®¿é—®

4. **æµè§ˆå™¨å…¼å®¹æ€§**
   - æ¨èä½¿ç”¨ Chromeã€Edgeã€Safari æœ€æ–°ç‰ˆ
   - éœ€è¦æ”¯æŒ ES6+ å’Œ fetch API

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **é¡¹ç›®æ–‡æ¡£**ï¼šæŸ¥çœ‹ `docs/` ç›®å½•
- **é˜¿é‡Œäº‘ ESA**ï¼šhttps://help.aliyun.com/zh/esa/
- **Vue.js**ï¼šhttps://vuejs.org/
- **Tailwind CSS**ï¼šhttps://tailwindcss.com/

---

é¡¹ç›®å·²å®Œæˆå¼€å‘ï¼Œæ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œï¼ğŸ‰

**ä¸‹ä¸€æ­¥**ï¼š
1. é…ç½® ESA è¾¹ç¼˜å‡½æ•°ï¼ˆå‚è€ƒ DEPLOYMENT.mdï¼‰
2. æ›´æ–° `.env` æ–‡ä»¶ä¸­çš„åŸŸå
3. å¼€å§‹ä½¿ç”¨å¹¶ç”Ÿæˆæ‚¨çš„ç¬¬ä¸€ä¸ªé¡µé¢ï¼
